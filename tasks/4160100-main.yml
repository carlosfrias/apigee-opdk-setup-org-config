---
- name: Remove old apigee-provision file
  file:
    path: '{{ onboarding_config_file_path }}'
    state: absent
  when: provided_onboarding_config_file_path is not defined

- name: Prepare onboarding config file
  template:
    src: '{{ onboarding_config }}.j2'
    dest: '{{ onboarding_config_file_path }}'
    mode: 0644
  when: provided_onboarding_config_file_path is not defined

- name: Copy provided onboarding config file
  copy:
    src: '{{ provided_onboarding_config_file_path }}'
    dest: '{{ onboarding_config_file_path }}'
    mode: 0644
  when: provided_onboarding_config_file_path is defined
